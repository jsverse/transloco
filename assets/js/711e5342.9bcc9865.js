"use strict";(self.webpackChunktransloco_docs=self.webpackChunktransloco_docs||[]).push([[3047],{3210:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var t=o(2540),s=o(3023);const r={title:"Unit Testing",description:"Unit Testing | Transloco Angular i18n"},a=void 0,i={id:"unit-testing",title:"Unit Testing",description:"Unit Testing | Transloco Angular i18n",source:"@site/docs/unit-testing.mdx",sourceDirName:".",slug:"/unit-testing",permalink:"/transloco/docs/unit-testing",draft:!1,unlisted:!1,editUrl:"https://github.com/jsverse/transloco/edit/master/docs/docs/unit-testing.mdx",tags:[],version:"current",frontMatter:{title:"Unit Testing",description:"Unit Testing | Transloco Angular i18n"},sidebar:"docs",previous:{title:"Inline Loaders",permalink:"/transloco/docs/lazy-load/inline-loaders"},next:{title:"SSR Support",permalink:"/transloco/docs/ssr-support"}},c={},l=[];function d(n){const e={a:"a",code:"code",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:["When running specs, we want to have the languages available immediately, in a synchronous fashion. Transloco provides you with a ",(0,t.jsx)(e.code,{children:"TranslocoTestingModule"}),", where you can pass the languages you need in your specs, and the config."]}),"\n",(0,t.jsx)(e.p,{children:"We recommend to be DRY and create a module factory function that we can use in each spec, For example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",metastring:'title="transloco-testing.module.ts"',children:"import {\n  TranslocoTestingModule,\n  TranslocoTestingOptions,\n} from '@jsverse/transloco';\nimport en from '../assets/i18n/en.json';\nimport es from '../assets/i18n/es.json';\n\nexport function getTranslocoModule(options: TranslocoTestingOptions = {}) {\n  return TranslocoTestingModule.forRoot({\n    langs: { en, es },\n    translocoConfig: {\n      availableLangs: ['en', 'es'],\n      defaultLang: 'en',\n    },\n    preloadLangs: true,\n    ...options,\n  });\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["Now we can use it in each ",(0,t.jsx)(e.code,{children:"spec"})," file:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",metastring:'{4} title="app.component.spec.ts"',children:"describe('AppComponent', () => {\n  beforeEach(async(() => {\n    TestBed.configureTestingModule({\n      imports: [getTranslocoModule()],\n      declarations: [AppComponent],\n    }).compileComponents();\n  }));\n\n  it('should work', () => {\n    const fixture = TestBed.createComponent(AppComponent);\n    fixture.detectChanges();\n    expect(\n      fixture.debugElement.query(By.css('h1')).nativeElement.innerText,\n    ).toBe('hello');\n  });\n});\n"})}),"\n",(0,t.jsxs)(e.p,{children:["You can find an example ",(0,t.jsx)(e.a,{href:"https://github.com/jsverse/transloco/blob/master/apps/transloco-playground/src/app/on-push/on-push.component.spec.ts",children:"here"}),"."]}),"\n",(0,t.jsxs)(e.p,{children:["If you need to test ",(0,t.jsx)(e.code,{children:"scopes"}),", you should add them as ",(0,t.jsx)(e.code,{children:"languages"}),", for example:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",metastring:'{6,7} title="transloco-testing.module.ts"',children:"export function getTranslocoModule(options: TranslocoTestingOptions = {}) {\n  return TranslocoTestingModule.forRoot({\n    langs: {\n      en,\n      es,\n      'admin-page/en': admin,\n      'admin-page/es': adminSpanish,\n    },\n    translocoConfig: {\n      availableLangs: ['en', 'es'],\n      defaultLang: 'en',\n    },\n    preloadLangs: true,\n    ...options,\n  });\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["You can find an example ",(0,t.jsx)(e.a,{href:"https://github.com/jsverse/transloco/blob/master/apps/transloco-playground/src/app/lazy/lazy.component.spec.ts",children:"here"}),"."]}),"\n",(0,t.jsxs)(e.p,{children:["Note that in order to import JSON files, you need to configure the TypeScript compiler by adding the following properties in ",(0,t.jsx)(e.code,{children:"tsconfig.json"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "resolveJsonModule": true,\n  "esModuleInterop": true\n}\n'})})]})}function p(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},3023:(n,e,o)=>{o.d(e,{R:()=>a,x:()=>i});var t=o(3696);const s={},r=t.createContext(s);function a(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);